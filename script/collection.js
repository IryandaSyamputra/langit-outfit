!function(t){t(document).ready((function(){e.init()})),t(".engoj-collection-sidebar")&&History.Adapter.bind(window,"statechange",(function(){var t=History.getState();if(!e.fillterClick){e.filterParams();var i=e.filterCreateUrl();e.filterGetContent(i),e.resetFilter()}e.fillterClick=!1}));var e={init:function(){this.initCollectionFilter(),this.initCollectionSorting()},initReview:function(){},initToggle:function(){},filterCategories:function(){},fillterTagEvents:function(){t("body").delegate('.filter-tag a:not(".clear"), .filter-tag label',"click",(function(i){t(this).toggleClass("active");var a=[];if(Shopify.queryParams.constraint&&(a=Shopify.queryParams.constraint.split("+")),!window.filter_mul_choice&&!t(this).prev().is(":checked")){var r=t(this).parents(".filter-tag").find("input:checked");var n;var o;if(r.length>0)if(n=r.val())(o=a.indexOf(n))>=0&&a.splice(o,1)}var n;var o;(n=t(this).prev().val())&&((o=a.indexOf(n))>=0?a.splice(o,1):a.push(n));a.length?Shopify.queryParams.constraint=a.join("+"):delete Shopify.queryParams.constraint,e.filterAjaxClick(),i.preventDefault()}))},filterMapClearAll:function(){t("body").delegate(".refined-widgets a.clear-all","click",(function(i){delete Shopify.queryParams.constraint,delete Shopify.queryParams.q,e.filterAjaxClick(),i.preventDefault(),t('.filter-tag a:not(".clear"), .filter-tag label').removeClass("active")})),t("body").delegate(".filter-block .clear","click",(function(i){var a=[];var r=t(this).parent().parent();Shopify.queryParams.constraint&&(a=Shopify.queryParams.constraint.split("+")),r.find("input:checked").each((function(){var e;var i=t(this).val();if(i){var r=a.indexOf(i);r>=0&&a.splice(r,1)}})),r.find("a").each((function(){t(this).removeClass("active")})),a.length?Shopify.queryParams.constraint=a.join("+"):delete Shopify.queryParams.constraint,e.filterAjaxClick(),i.preventDefault()}))},filterMapClear:function(){t(".filter-tag").each((function(){var i=t(this);i.find("input:checked").length>0&&i.find(".clear").show().click((function(a){var r=[];Shopify.queryParams.constraint&&(r=Shopify.queryParams.constraint.split("+")),i.find("input:checked").each((function(){var e;var i=t(this).val();if(i){var a=r.indexOf(i);a>=0&&r.splice(a,1)}})),r.length?Shopify.queryParams.constraint=r.join("+"):delete Shopify.queryParams.constraint,e.filterAjaxClick(),a.preventDefault()}))}))},filterParams:function(){if(Shopify.queryParams={},location.search.length)for(var t,e=0,i=location.search.substr(1).split("&");e<i.length;e++)(t=i[e].split("=")).length>1&&(Shopify.queryParams[decodeURIComponent(t[0])]=decodeURIComponent(t[1]))},filterMapEvents:function(){e.fillterTagEvents()},resetFilter:function(){t(".filter-custom .active, .filter-links .active").removeClass("active"),t(".filter-tag input:checked").attr("checked",!1);var e=location.pathname.match(/\/collections\/(.*)(\?)?/);e&&e[1]&&t(".filter-links a[href='"+e[0]+"']").addClass("active")},filterMapData:function(i){var a=t(".grid-uniform");var r=t(i).find(".grid-uniform");a.replaceWith(r),t(".pagination").length>0&&t(".pagination").replaceWith(t(i).find(".pagination")),t(".filter-blocks").replaceWith(t(i).find(".filter-blocks")),e.filterMapClear(),quickView();var n={cartContainer:".enj-minicart-ajax",addToCartSelector:".enj-add-to-cart-btn",cartCountSelector:".enj-cartcount",cartCostSelector:".enj-cartcost",moneyFormat:null};function o(){t(".loadmore").children("a").on("click",(function(e){t(".loadmore").addClass("d-none"),t(".loading.tshopify-popup").addClass("active");var i=t(".loadmore").children("a").attr("href");"#"!=i?(t(".load-data").load(i+" .product-grid-view .row"),setTimeout((function(){t(".load-data .js_loadmore").each((function(){t(this).appendTo(".product-grid-view .row")})),t(".loadmore").eq(0).remove(),o(),quickView();var e={cartContainer:".enj-minicart-ajax",addToCartSelector:".enj-add-to-cart-btn",cartCountSelector:".enj-cartcount",cartCostSelector:".enj-cartcost",moneyFormat:null};jQuery((function(t){ajaxCart.init(e)})),t(".loading.tshopify-popup").removeClass("active")}),2e3)):t(".loadmore").remove(),e.preventDefault()}))}jQuery((function(t){ajaxCart.init(n)})),o(),jQuery(".engoj_select_color a").each((function(){jQuery(this).on("click",(function(){var t=jQuery(this).data("engojvariant-img");return jQuery(this).parents(".engoj_grid_parent").find(".engoj_find_img img").attr({src:t}),!1}))}))},filterCreateUrl:function(e){var i=t.param(Shopify.queryParams).replace(/%2B/g,"+");return e?""!=i?e+"?"+i:e:location.pathname+"?"+i},filterAjaxClick:function(t){delete Shopify.queryParams.page;var i=e.filterCreateUrl(t);e.fillterClick=!0,History.pushState({param:Shopify.queryParams},i,i),e.filterGetContent(i)},filterGetContent:function(i){t.ajax({type:"get",url:i,beforeSend:function(){showPopup(".loading")},success:function(t){e.filterMapData(t),e.filterMapClear(),hidePopup(".loading"),hidePopup(".filter-to-left , .js-bg")},error:function(e,i){hidePopup(".loading"),hidePopup(".filter-to-left, .js-bg"),t(".ajax-error-message").text(t.parseJSON(e.responseText).description),showPopup(".ajax-error-modal")}})},initCollectionFilter:function(){t(".engoj-collection-sidebar").length>0&&(e.filterParams(),e.filterMapEvents(),e.filterMapClear(),e.filterMapClearAll())},initCollectionSorting:function(i){t(".collection-sorting a").click((function(i){i.preventDefault(),t(this).parent().hasClass("active")||(Shopify.queryParams.sort_by=t(this).attr("href"),e.filterAjaxClick(),t(".collection-sorting li.active").removeClass("active"),t(this).parent().addClass("active"));var a=t(this).text();t(this).closest(".dropdown").find(".dropdown-label").text(a),t(this).closest(".dropdown-content").removeClass("active")}))},initCollectionViewMode:function(){},initCollectionShow:function(){},initPaging:function(){}}}(jQuery);